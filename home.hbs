{{!< default}}

<main class="gh-main gh-outer">
    <div class="gh-inner">
        <section class="gh-topic gh-topic-grid">

        {{#get 'posts' filter='featured:true' limit='all' as |featured|}}
            <div class="featured-nav">
                <button type="button" role="presentation" class="owl-prev js-featured-prev"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="18" height="18" fill="currentColor"><path d="M20.547 22.107L14.44 16l6.107-6.12L18.667 8l-8 8 8 8 1.88-1.893z"></path></svg></button>
                <button type="button" role="presentation" class="owl-next js-featured-next"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="18" height="18" fill="currentColor"><path d="M11.453 22.107L17.56 16l-6.107-6.12L13.333 8l8 8-8 8-1.88-1.893z"></path></svg></button>
            </div>
            <h2 class="gh-topic-name" style="margin-bottom:10px;">
                FEATURED
            </h2>

          <div class='featured-feed js-featured-feed'>

            {{#foreach featured visibility='all'}}
              <div class='featured-card'>
                {{! Feature Image }}
                {{#if feature_image}}
                  <a
                    class='featured-card__media m-b-sm'
                    href='{{url}}'
                    title='{{title}}'
                    aria-label='{{title}}'
                  >
                    <img
                      class='lazyload'
                      srcset="{{img_url feature_image size="s"}} 300w,
                            {{img_url feature_image size="m"}} 720w,
                            {{img_url feature_image size="l"}} 960w,
                            {{img_url feature_image size="xl"}} 1200w,
                            {{img_url feature_image size="xxl"}} 2000w"
                    sizes="(max-width: 1200px) 100vw, 1200px"
                    src="{{img_url feature_image size="m"}}"
                      alt='{{title}}'
                    />
                  </a>
                {{/if}}

                {{! Post Title }}
                <h3 class='gh-card-title ' style="margin-top:10px;">
                  <a href='{{url}}' aria-label='{{title}}'>{{title}}</a>
                </h3>
              </div>
            {{/foreach}}
          </div>
        {{/get}}
        {{#contentFor 'scripts'}}
          <script>
            const sliderContainer = document.querySelector('.js-featured-feed'); if
            (sliderContainer) { const slider = tns({ container: sliderContainer, items:
            4, slideBy: 1, loop: true,                 prevButton: document.querySelector(".js-featured-prev"),
                nextButton: document.querySelector(".js-featured-next"),
autoplay: false, gutter: 32, nav: true,
            responsive: { 0: { items: 1, }, 768: { items: 2, }, 992: { items: 4, } } });
            }
          </script>
        {{/contentFor}}
        </section>

        <section class="gh-topic gh-topic-grid">
            <h2 class="gh-topic-name">
                {{#match pagination.pages ">" 1}}
                    <a href="{{@site.url}}/page/2">Latest</a>
                {{else}}
                    Latest
                {{/match}}
            </h2>

            <div class="gh-topic-content">
                {{#foreach posts limit="7"}}
                    {{> "loop-grid"}}
                {{/foreach}}
            </div>

            <footer class="gh-topic-footer">
                {{#match pagination.pages ">" 1}}
                    <a class="gh-topic-link" href="{{@site.url}}/page/2">Show more {{> "icons/arrow"}}</a>
                {{/match}}
            </footer>
        </section>



        {{#if @custom.enter_tag_slugs_for_primary_sections}}
            {{#get "tags" filter="slug:[{{@custom.enter_tag_slugs_for_primary_sections}}]"}}
                {{#foreach tags}}
                    {{> "topic-grid"}}
                {{/foreach}}
            {{/get}}
        {{else}}
            {{#match posts.length ">" 1}}
                {{#get "tags" include="count.posts" order="count.posts desc" limit="3"}}
                    {{#foreach tags}}
                        {{> "topic-grid"}}
                    {{/foreach}}
                {{/get}}
            {{/match}}
        {{/if}}

        {{#if @custom.enter_tag_slugs_for_secondary_sections}}
            {{#get "tags" filter="slug:[{{@custom.enter_tag_slugs_for_secondary_sections}}]"}}
                {{#if tags}}
                    <div class="gh-topic-list">
                        {{#foreach tags}}
                            {{> "topic-minimal"}}
                        {{/foreach}}
                    </div>
                {{/if}}
            {{/get}}
        {{else}}
            {{#match posts.length ">" 1}}
                {{#get "tags" include="count.posts" order="count.posts desc"}}
                    {{#if tags.[3]}}
                        <div class="gh-topic-list">
                            {{#foreach tags from="4" limit="3"}}
                                {{> "topic-minimal"}}
                            {{/foreach}}
                        </div>
                    {{/if}}
                {{/get}}
            {{/match}}
        {{/if}}
    </div>
</main>